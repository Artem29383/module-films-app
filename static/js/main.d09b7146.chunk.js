(this["webpackJsonpmodule-list-app"]=this["webpackJsonpmodule-list-app"]||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(32),i=n.n(c),l=(n(73),n(18)),o=n(54),s=n.n(o),u=n(22),d=function(e){var t=Object(u.d)();return Object(a.useCallback)((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t({type:e,payload:n})}),[t,e])},m=n(56),f=n.n(m),p=n(17),b=n(57),v=n(35),E=n.n(v),_=n(12),O=n.n(_),j=n(6),h=n(7);function x(){var e=Object(j.a)(["\n  position: absolute;\n  font-family: Helvetica_Medium;\n  font-size: 16px;\n  color: red;\n  bottom: -45%;\n  left: 50%;\n  transform: translateX(-50%);\n"]);return x=function(){return e},e}function F(){var e=Object(j.a)(["\n  border: none;\n  background-color: transparent;\n  width: 100%;\n  font-size: 22px;\n  padding-left: 15px;\n  padding-bottom: 7px;\n  border-bottom: 2px solid #999;\n  margin-left: 50%;\n  transform: translateX(-50%);\n  &:focus ~ ",", &:not(:placeholder-shown) ~ "," {\n  top: -5px;\n  color: #ea5a5a;\n  }\n  &:focus ~ ",", &:not(:placeholder-shown) ~ "," {\n  transform: rotateY(0deg);\n  }\n"]);return F=function(){return e},e}function y(){var e=Object(j.a)(["\n  position: relative;\n"]);return y=function(){return e},e}function L(){var e=Object(j.a)(["\n  position: absolute;\n  height: 3px;\n  content: '';\n  transform: rotateY(90deg);\n  transition: transform .2s linear;\n  background-color: #ea5a5a;\n  width: 100%;\n  bottom: 0;\n  left: 0;\n"]);return L=function(){return e},e}function g(){var e=Object(j.a)(["\n  font-size: 14px;\n  pointer-events: none;\n  color: #999;\n  position: absolute;\n  left: 30px;\n  top: 25px;\n  transition: 0.2s ease all;\n"]);return g=function(){return e},e}var S=h.a.label(g()),C=h.a.div(L()),I={Group:h.a.div(y()),Label:S,Bar:C,InputField:h.a.input(F(),S,S,C,C),Error:h.a.div(x())},w=Object(a.memo)((function(e){var t=e.value,n=e.handler,a=e.blur,c=e.keyDown,i=e.desc,l=e.isError,o=e.focus,s=void 0!==o&&o;return r.a.createElement(I.Group,null,r.a.createElement(I.InputField,{value:t,onChange:n,onBlur:a,onKeyDown:c,placeholder:" ",type:"text",autoFocus:s}),r.a.createElement(I.Bar,null),r.a.createElement(I.Label,null,i),l&&!t&&r.a.createElement(I.Error,null,"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435."))}));function k(){var e=Object(j.a)(["\n  background: #ea5a5a;\n  text-transform: uppercase;\n  max-width: 160px;\n  width: 100%;\n  font-size: 14px;\n  line-height: 2.5;\n  border: none;\n  cursor: pointer;\n  color: #fff;\n  font-family: Helvetica_Bold;\n  border-radius: 20px;\n  margin-left: 50%;\n  transform: translateX(-50%);\n"]);return k=function(){return e},e}var T=h.a.button(k()),D=Object(a.memo)((function(e){var t=e.children,n=e.clickHandler;return r.a.createElement(T,{onClick:n},t)})),M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.e)((function(n){return e(n,t)}))},N=n(29),A=n(34),U=n.n(A),P=function(e){return e.films.isPost},G=function(e){return e.films.filmsList.entities},B=Object(N.a)([G],(function(e){return e})),H=Object(N.a)([G,function(e){return e.films.filmsList.ids}],(function(e,t){return U()((function(n){return t.filter((function(t){return e[t].name.toLowerCase().includes(n.toLowerCase())}))}))})),z=function(){var e=Object(a.useState)(!1),t=Object(p.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(""),l=Object(p.a)(i,2),o=l[0],s=l[1],u=Object(a.useState)(""),m=Object(p.a)(u,2),f=m[0],v=m[1],_=Object(a.useState)(""),j=Object(p.a)(_,2),h=j[0],x=j[1],F=Object(a.useState)(""),y=Object(p.a)(F,2),L=y[0],g=y[1],S=Object(a.useState)(!1),C=Object(p.a)(S,2),I=C[0],k=C[1],T=M(P),N=d("POST_FILM"),A=d("POST_FILM_SUCCESS"),U=Object(a.useCallback)((function(e){s(e.currentTarget.value)}),[s]),G=Object(a.useCallback)((function(e){v(e.currentTarget.value)}),[v]),B=Object(a.useCallback)((function(e){x(e.currentTarget.value)}),[x]),H=Object(a.useCallback)((function(e){g(e.currentTarget.value)}),[g]);Object(a.useEffect)((function(){I&&setTimeout((function(){return k(!1)}),2e3),T&&setTimeout((function(){return A(!1)}),2e3)}),[I,T,A]);var z={collapse:"".concat(O.a.reactCollapse),content:"".concat(E()(O.a.createdFilmFrame,n&&O.a.show))};return r.a.createElement(b.Collapse,{isOpened:!0,theme:z},r.a.createElement("div",{className:O.a.title},r.a.createElement("div",{className:O.a.titleText},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c")),r.a.createElement("div",{className:O.a.frameFields},r.a.createElement("div",{className:O.a.field},r.a.createElement(w,{isError:I,value:o,handler:U,desc:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"})),r.a.createElement("div",{className:O.a.field},r.a.createElement(w,{isError:I,value:f,handler:G,desc:"\u0416\u0430\u043d\u0440"})),r.a.createElement("div",{className:O.a.field},r.a.createElement(w,{isError:I,value:h,handler:B,desc:"\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430"})),r.a.createElement("div",{className:O.a.field},r.a.createElement(w,{isError:I,value:L,handler:H,desc:"\u0421\u0442\u0440\u0430\u043d\u0430 \u0432\u044b\u043f\u0443\u0441\u043a\u0430"})),T&&r.a.createElement("div",{className:E()(O.a.error,O.a.green)},"\u0424\u0438\u043b\u044c\u043c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d.")),r.a.createElement("div",{className:O.a.btn},r.a.createElement(D,{clickHandler:function(){if(o.trim()&&f.trim()&&h.trim()&&L.trim()){var e=Date.now();N({payload:{id:e,name:o,genre:f,date:h,country:L,fields:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","\u0416\u0430\u043d\u0440","\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430","\u0421\u0442\u0440\u0430\u043d\u0430"]}}),s(""),v(""),x(""),g("")}else k(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c")),r.a.createElement("div",{className:E()(O.a.close,n&&O.a.active),onClick:function(){c(!n),n&&(s(""),v(""),x(""),g(""))}}))},J=n(61),R=n.n(J),X=n(36),V=n.n(X),W=n(24),q=n(27),Y=n.n(q),K=Object(a.memo)((function(e){var t=e.id,n=e.films,a=e.removeFilmHandler;return r.a.createElement("li",{className:Y.a.item},r.a.createElement(W.a,{to:"/films/".concat(t),className:Y.a.filmsItem},r.a.createElement("div",{className:Y.a.title},r.a.createElement("span",{className:Y.a.titleText},n[t].name))),r.a.createElement(W.a,{to:"/",className:Y.a.removeBtn,onClick:function(){a(t)}}))})),Z=function(){var e=Object(l.g)(),t=Object(a.useState)(""),n=Object(p.a)(t,2),c=n[0],i=n[1],o=M(B),s=M(H)(c),u=R.a.parse(e.location.search).search||"",m=""!==u.trim(),f=d("DELETE_FILM"),b=Object(a.useCallback)((function(t){var n=t.currentTarget.value;n.trim()?(i(n),e.push("/?search=".concat(n.toLowerCase()))):(i(""),e.push("/"))}),[i,e]),v=function(e){f(e)};Object(a.useEffect)((function(){m&&i(u)}),[]),Object(a.useEffect)((function(){!m&&c&&i("")}),[m,c]);var E=s.map((function(e){return r.a.createElement(K,{key:e,id:e,films:o,removeFilmHandler:v})}));return r.a.createElement("div",{className:V.a.filmsContainer},r.a.createElement("div",{className:V.a.search},r.a.createElement(w,{value:c,handler:b,desc:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u043c\u0430"})),r.a.createElement("div",{className:V.a.content},r.a.createElement("ul",null,E)))},Q=function(){return r.a.createElement("div",{className:f.a.home},r.a.createElement(z,null),r.a.createElement(Z,null))},$=n(30),ee=n(11);function te(){var e=Object(j.a)(["\n  position: absolute;\n  height: 3px;\n  content: '';\n  transform: rotateY(90deg);\n  transition: transform .2s linear;\n  background-color: #ea5a5a;\n  width: 100%;\n  bottom: 0;\n  left: 0;\n"]);return te=function(){return e},e}function ne(){var e=Object(j.a)(["\n  padding: 0 55px;\n"]);return ne=function(){return e},e}function ae(){var e=Object(j.a)(["\n  font-size: 22px;\n  color: #444;\n  word-break: break-word;\n  border-bottom: 2px solid #444;\n  width: 100%;\n  padding: 30px 0 7px 15px;\n  margin-left: 50%;\n  transform: translateX(-50%);\n"]);return ae=function(){return e},e}function re(){var e=Object(j.a)(["\n  position: relative;\n"]);return re=function(){return e},e}var ce={Group:h.a.div(re()),StyledValue:h.a.div(ae()),WrapField:h.a.div(ne()),Bar:h.a.div(te())},ie=function(e){var t=e.name,n=e.field,c=e.valueDefault,i=e.id,l=Object(a.useState)(!1),o=Object(p.a)(l,2),s=o[0],u=o[1],m=Object(a.useState)(""),f=Object(p.a)(m,2),b=f[0],v=f[1],E=d("UPDATE_FILM_FIELD"),_=Object(a.useState)(""),O=Object(p.a)(_,2),j=O[0],h=O[1],x=M(B),F=Object(a.useCallback)((function(e){v(e.currentTarget.value)}),[v]);return r.a.createElement(ce.Group,null,r.a.createElement(ce.WrapField,null,s?r.a.createElement(w,{value:b,handler:F,type:"text",blur:function(){b.trim()&&b!==c?E({id:i,payload:Object(ee.a)({},x[i],Object($.a)({},j,b))}):v(c),u(!1)},keyDown:function(e){"Enter"===e.key&&(b!==c&&b.trim()?E({id:i,payload:Object(ee.a)({},x[i],Object($.a)({},j,b))}):v(c),u(!1)),"Escape"===e.key&&(u(!1),v(c))},focus:!0}):r.a.createElement(ce.StyledValue,{onDoubleClick:function(e){v(c),h(e.currentTarget.getAttribute("data-name")),u(!0)},"data-name":t},n,": ",c)),r.a.createElement(ce.Bar,null))},le=Object(a.memo)((function(e){var t=e.id,n=e.field,a=e.valueDefault,c=e.name;return r.a.createElement(ie,{field:n,name:c,valueDefault:a,id:t})}));function oe(){var e=Object(j.a)(["\n  text-decoration: none;\n  display: block;\n  color: #fff;\n"]);return oe=function(){return e},e}function se(){var e=Object(j.a)(["\n  width: 500px;\n  height: auto;\n  box-shadow: 0 0 18px 0 rgba(0, 0, 0, 0.75);\n  border-radius: 20px;\n  padding-bottom: 30px;\n"]);return se=function(){return e},e}var ue={FilmContainer:h.a.div(se()),Nav:Object(h.a)(W.a)(oe())},de=function(e){return e.film.isLoading},me=function(e){return e.film.film},fe=Object(N.a)([me],(function(e){return U()((function(){return Object.keys(e||[]).filter((function(e){return"id"!==e&&"fields"!==e}))}))}));function pe(){var e=Object(j.a)(['\n  display: inline-block;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 80px;\n  height: 80px;\n &:after {\n  content: " ";\n  display: block;\n  width: 64px;\n  height: 64px;\n  margin: 8px;\n  border-radius: 50%;\n  border: 6px solid #ea5a5a;\n  border-color: #ea5a5a transparent #ea5a5a transparent;\n  animation: '," 1.2s linear infinite;\n}\n"]);return pe=function(){return e},e}function be(){var e=Object(j.a)(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]);return be=function(){return e},e}var ve=Object(h.b)(be()),Ee=h.a.div(pe(),ve),_e=function(){return r.a.createElement(Ee,null)},Oe=function(){var e=M(de),t=d("GET_FILM"),n=d("SET_LOADING_FILM"),c=Object(l.h)().id,i=M(fe)(),o=M(me);Object(a.useEffect)((function(){o.id!==Number(c)&&(n(!0),t(c))}),[]);var s=i.map((function(e,t){return r.a.createElement(le,{key:e,id:c,name:e,field:o.fields[t],valueDefault:o[e]})}));return e?r.a.createElement(_e,null):r.a.createElement(ue.FilmContainer,null,s,r.a.createElement(D,null,r.a.createElement(ue.Nav,{to:"/"},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043e\u043a\u043d\u043e")))},je=function(){var e=d("GET_FILMS");return Object(a.useEffect)((function(){e()}),[e]),r.a.createElement("div",{className:s.a.content},r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/",exact:!0,render:function(){return r.a.createElement(Q,null)}}),r.a.createElement(l.b,{path:"/films/:id",render:function(){return r.a.createElement(Oe,null)}}),r.a.createElement(l.a,{to:"/"})))},he=n(21),xe=n(66),Fe=n(63),ye=function(e){return JSON.parse(JSON.stringify(e))},Le=function(e,t){var n=Object(ee.a)({},e);return delete n[t],n},ge=function(e,t){var n=e.indexOf(t);return e.splice(n,1),e},Se={filmsList:{entities:[],ids:[]},isPost:!1},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PUT_FILMS":var n=t.payload,a=n.entities,r=n.ids;return Object(ee.a)({},e,{filmsList:{entities:a,ids:r}});case"ADD_FILM":var c=t.payload,i=c.id,l=c.payload,o=ye(e.filmsList),s=o.entities,u=o.ids;return s[i]=l,u.push(i),Object(ee.a)({},e,{filmsList:{entities:s,ids:u}});case"DELETE_FILM_SUCCESS":var d=ye(e.filmsList),m=d.entities,f=d.ids;return Object(ee.a)({},e,{filmsList:Object(ee.a)({},e.filmsList,{entities:Le(m,t.payload),ids:ge(f,t.payload)})});case"UPDATE_FILM_FIELD_SUCCESS":var p=t.payload,b=p.id,v=p.obj,E=ye(e.filmsList),_=E.entities,O=E.ids;return _[b]=v,Object(ee.a)({},e,{filmsList:{entities:_,ids:O}});case"POST_FILM_SUCCESS":return Object(ee.a)({},e,{isPost:t.payload});default:return e}},Ie={film:{},isLoading:!1},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_FILM_SUCCESS":return Object(ee.a)({},e,{film:t.payload,isLoading:!1});case"SET_LOADING_FILM":return Object(ee.a)({},e,{isLoading:t.payload});case"UPDATE_FILM_FIELDS_SUCCESS":return Object(ee.a)({},e,{film:t.payload});default:return e}},ke=n(8),Te=n.n(ke),De=n(15),Me=n(19),Ne=n(41),Ae=n(64),Ue=n(65),Pe=n.n(Ue),Ge=new function e(){var t=this;Object(Ae.a)(this,e),this.getFilms=function(){return t.instance.get("filmsList")},this.getFilm=function(e){return t.instance.get("filmsList/".concat(e))},this.postCreateFilms=function(e){return t.instance.post("filmsList",e)},this.deleteFilm=function(e){return t.instance.delete("filmsList/".concat(e))},this.updateFilm=function(e,n){return t.instance.put("filmsList/".concat(e),n)},this.instance=Pe.a.create({baseURL:"http://localhost:5000/"})},Be=Te.a.mark(Re),He=Te.a.mark(Xe),ze=Te.a.mark(Ve),Je=Te.a.mark(We);function Re(e){return Te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Me.a)(Ge.postCreateFilms,e.payload.payload);case 3:return t.next=5,Object(Me.b)({type:"ADD_FILM",payload:{id:e.payload.payload.id,payload:e.payload.payload}});case 5:return t.next=7,Object(Me.b)({type:"POST_FILM_SUCCESS",payload:!0});case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),Be,null,[[0,9]])}function Xe(){var e,t,n,a;return Te.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(Me.a)(Ge.getFilms);case 3:return e=r.sent,t=new Ne.b.Entity("filmsList"),n=[t],a=Object(Ne.a)(e.data,n),r.next=9,Object(Me.b)({type:"PUT_FILMS",payload:{entities:a.entities.filmsList||{},ids:a.result}});case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),console.log(r.t0);case 14:case"end":return r.stop()}}),He,null,[[0,11]])}function Ve(e){return Te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Me.a)(Ge.deleteFilm,e.payload);case 3:return t.next=5,Object(Me.b)({type:"DELETE_FILM_SUCCESS",payload:e.payload});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),ze,null,[[0,7]])}function We(){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Me.c)("POST_FILM",Re);case 2:return e.next=4,Object(Me.c)("GET_FILMS",Xe);case 4:return e.next=6,Object(Me.c)("DELETE_FILM",Ve);case 6:case"end":return e.stop()}}),Je)}var qe=n(9),Ye=Te.a.mark(Qe),Ke=Te.a.mark($e),Ze=Te.a.mark(et);function Qe(e){var t;return Te.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(De.b)(Ge.getFilm,e.payload);case 3:return t=n.sent,n.next=6,Object(De.c)({type:"GET_FILM_SUCCESS",payload:t.data});case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(De.c)(Object(qe.d)("/"));case 12:case"end":return n.stop()}}),Ye,null,[[0,8]])}function $e(e){return Te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(De.b)(Ge.updateFilm,e.payload.id,e.payload.payload);case 3:return t.next=5,Object(De.c)({type:"UPDATE_FILM_FIELD_SUCCESS",payload:{id:e.payload.id,obj:e.payload.payload}});case 5:return t.next=7,Object(De.c)({type:"UPDATE_FILM_FIELDS_SUCCESS",payload:e.payload.payload});case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),Ke,null,[[0,9]])}function et(){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(De.d)("GET_FILM",Qe);case 2:return e.next=4,Object(De.d)("UPDATE_FILM_FIELD",$e);case 4:case"end":return e.stop()}}),Ze)}var tt=Te.a.mark(nt);function nt(){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(De.a)([We(),et()]);case 2:case"end":return e.stop()}}),tt)}var at,rt=n(28),ct=n(53),it=n(13),lt=Object(it.a)(),ot=Object(xe.a)(),st=Object(he.createStore)((at=lt,Object(he.combineReducers)({films:Ce,film:we,router:Object(rt.b)(at)})),Object(Fe.composeWithDevTools)(Object(he.applyMiddleware)(ot,Object(ct.a)(lt))));ot.run(nt);var ut=st;i.a.render(r.a.createElement(u.a,{store:ut},r.a.createElement(rt.a,{history:lt},r.a.createElement(je,null))),document.getElementById("root"))},12:function(e,t,n){e.exports={reactCollapse:"AddFilm_reactCollapse__1UIbf",createdFilmFrame:"AddFilm_createdFilmFrame__qJHL1",show:"AddFilm_show__1FuCa",title:"AddFilm_title__1Xy8_",titleText:"AddFilm_titleText__1WRfP",close:"AddFilm_close__32gEo",active:"AddFilm_active__1IS8d",frameFields:"AddFilm_frameFields__ncxrV",field:"AddFilm_field__1Zd1P",error:"AddFilm_error__10bU3",green:"AddFilm_green__3zETa",btn:"AddFilm_btn__3Kmp9"}},27:function(e,t,n){e.exports={item:"FilmItem_item__3a3ry",filmsItem:"FilmItem_filmsItem__ck-yw",removeBtn:"FilmItem_removeBtn__2_2h9",title:"FilmItem_title__1q9vV",titleText:"FilmItem_titleText__165-_"}},36:function(e,t,n){e.exports={filmsContainer:"FilmsList_filmsContainer__3U2xG",search:"FilmsList_search__2UzQR",content:"FilmsList_content__2GZPC"}},54:function(e,t,n){e.exports={content:"App_content__JEbsR"}},56:function(e,t,n){e.exports={home:"HomePage_home__3qIF8"}},68:function(e,t,n){e.exports=n(109)},73:function(e,t,n){}},[[68,1,2]]]);
//# sourceMappingURL=main.d09b7146.chunk.js.map