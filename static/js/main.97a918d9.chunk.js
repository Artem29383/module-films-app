(this["webpackJsonpmodule-list-app"]=this["webpackJsonpmodule-list-app"]||[]).push([[0],{11:function(e,t,a){e.exports={createdFilmFrame:"AddFilm_createdFilmFrame__FJNSf",show:"AddFilm_show__1cVIx",title:"AddFilm_title__2Hdq8",titleText:"AddFilm_titleText__3d4nP",frameContent:"AddFilm_frameContent__2optG",close:"AddFilm_close__Qxjj7",active:"AddFilm_active__Z_2Cz",frameFields:"AddFilm_frameFields__1yfj7",error:"AddFilm_error__1iNV9",green:"AddFilm_green__VG5b5"}},13:function(e,t,a){e.exports={filmsContainer:"FilmsList_filmsContainer__11OxH",search:"FilmsList_search__1e7e8",content:"FilmsList_content__3tiIo",item:"FilmsList_item__3LbjF",filmsItem:"FilmsList_filmsItem__EZYd-",removeBtn:"FilmsList_removeBtn__1ydW5",active:"FilmsList_active__3BJmb",title:"FilmsList_title__24V4B",titleText:"FilmsList_titleText__3nlwD"}},22:function(e,t,a){e.exports={frameInput:"Input_frameInput__1787G",group:"Input_group__EgZ5C",label:"Input_label__15E8K",input:"Input_input__2Faqu",bar:"Input_bar__3gCN7",error:"Input_error__1s1uQ"}},44:function(e,t,a){e.exports={content:"App_content__1jzHC"}},47:function(e,t,a){e.exports={home:"HomePage_home__3TQdG"}},48:function(e,t,a){e.exports={btn:"Button_btn__xh7zG"}},54:function(e,t,a){e.exports=a(84)},59:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),i=a.n(c),s=(a(59),a(19)),l=a(44),o=a.n(l),u=a(21),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.c)((function(a){return e(a,t)}))},d=a(27),f=a(46),_=a.n(f),p=function(e){return e.films.isPost},b=function(e){return e.films.filmsList.entities},v=Object(d.a)([function(e){return e.films.init}],(function(e){return e})),E=Object(d.a)([b],(function(e){return e})),O=Object(d.a)([b,function(e){return e.films.filmsList.ids}],(function(e,t){return _()((function(a){return t.filter((function(t){return e[t].name.toLowerCase().includes(a.toLowerCase())}))}))})),j=function(e){var t=Object(u.b)();return Object(n.useCallback)((function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t({type:e,payload:a})}),[t,e])},h=a(47),F=a.n(h),L=a(16),x=a(11),y=a.n(x),I=a(28),g=a.n(I),C=a(22),T=a.n(C),N=function(e){var t=e.value,a=e.handler,n=e.desc,c=e.isError;return r.a.createElement("div",{className:T.a.group},r.a.createElement("input",{value:t,onChange:a,placeholder:" ",className:T.a.frameInput,type:"text"}),r.a.createElement("span",{className:T.a.bar}),r.a.createElement("label",{className:T.a.label},n),c&&!t&&r.a.createElement("div",{className:T.a.error},"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435."))},S=a(48),w=a.n(S),k=function(e){var t=e.text,a=e.fn;return r.a.createElement("button",{className:w.a.btn,onClick:a},t)},M=function(){var e=Object(n.useState)(!1),t=Object(L.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(""),s=Object(L.a)(i,2),l=s[0],o=s[1],u=Object(n.useState)(""),d=Object(L.a)(u,2),f=d[0],_=d[1],b=Object(n.useState)(""),v=Object(L.a)(b,2),E=v[0],O=v[1],h=Object(n.useState)(""),F=Object(L.a)(h,2),x=F[0],I=F[1],C=Object(n.useState)(!1),T=Object(L.a)(C,2),S=T[0],w=T[1],M=m(p),A=j("POST_FILM"),P=j("POST_FILM_SUCCESS"),D=Object(n.useCallback)((function(e){o(e.currentTarget.value)}),[o]),B=Object(n.useCallback)((function(e){_(e.currentTarget.value)}),[_]),G=Object(n.useCallback)((function(e){O(e.currentTarget.value)}),[O]),J=Object(n.useCallback)((function(e){I(e.currentTarget.value)}),[I]);return Object(n.useEffect)((function(){S&&setTimeout((function(){return w(!1)}),2e3),M&&setTimeout((function(){return P(!1)}),2e3)}),[S,M,P]),r.a.createElement("div",{className:g()(y.a.createdFilmFrame,a&&y.a.show)},r.a.createElement("div",{className:y.a.frameContent},r.a.createElement("div",{className:y.a.title},r.a.createElement("div",{className:y.a.titleText},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c")),r.a.createElement("div",{className:y.a.frameFields},r.a.createElement(N,{isError:S,value:l,handler:D,desc:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),r.a.createElement(N,{isError:S,value:f,handler:B,desc:"\u0416\u0430\u043d\u0440"}),r.a.createElement(N,{isError:S,value:E,handler:G,desc:"\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430"}),r.a.createElement(N,{isError:S,value:x,handler:J,desc:"\u0421\u0442\u0440\u0430\u043d\u0430 \u0432\u044b\u043f\u0443\u0441\u043a\u0430"}),M&&r.a.createElement("div",{className:g()(y.a.error,y.a.green)},"\u0424\u0438\u043b\u044c\u043c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d.")),r.a.createElement(k,{text:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c",fn:function(){if(l.trim()&&f.trim()&&E.trim()&&x.trim()){var e=Date.now();A({id:e,payload:{id:e,name:l,genre:f,date:E,country:x,fields:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","\u0416\u0430\u043d\u0440","\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430","\u0421\u0442\u0440\u0430\u043d\u0430"]}}),o(""),_(""),O(""),I("")}else w(!0)}}),r.a.createElement("span",{className:g()(y.a.close,a&&y.a.active),onClick:function(){c(!a),a&&(o(""),_(""),O(""),I(""))}},"\u2716")))},A=a(13),P=a.n(A),D=a(20),B=function(){var e=Object(s.g)(),t=Object(n.useState)(""),a=Object(L.a)(t,2),c=a[0],i=a[1],l=m(E),o=m(O)(c),u=/\?search=([(a-zA-Z)|(\u0430-\u044f\u0410-\u042f)|\w]+)/.test(e.location.search),d=j("DELETE_FILM"),f=Object(n.useCallback)((function(t){t.currentTarget.value.trim()?(i(t.currentTarget.value),e.push("/?search=".concat(t.currentTarget.value.toLowerCase()))):(i(""),e.push("/"))}),[i,e]);Object(n.useEffect)((function(){if(u){var t=e.location.search.match(/=(.+)$/m)[1].replace(/%20/g," ");i(t)}}),[]),Object(n.useEffect)((function(){!u&&c&&i("")}),[u,c]);var _=o.map((function(e){return r.a.createElement("li",{key:e,className:P.a.item},r.a.createElement(D.b,{to:"/films/".concat(e),activeClassName:P.a.active,className:P.a.filmsItem},r.a.createElement("div",{className:P.a.title},r.a.createElement("span",{className:P.a.titleText},l[e].name.length>15?l[e].name.slice(0,15)+"...":l[e].name))),r.a.createElement(D.b,{to:"/",className:P.a.removeBtn,onClick:function(){return function(e){d(e)}(e)}},"\u2716"))}));return r.a.createElement("div",{className:P.a.filmsContainer},r.a.createElement("div",{className:P.a.search},r.a.createElement(N,{value:c,handler:f,desc:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u043c\u0430"})),r.a.createElement("div",{className:P.a.content},r.a.createElement("ul",null,_)))},G=[{exact:!0,path:["/","/?search=?str","/films/:id"],component:function(){return r.a.createElement("div",{className:F.a.home},r.a.createElement(M,null),r.a.createElement(B,null))}}],J=function(){var e=m(v),t=j("GET_FILMS");Object(n.useEffect)((function(){t()}),[t]);var a=G.map((function(e){var t=e.exact,a=e.path,n=e.component;return r.a.createElement(s.b,{exact:t,key:a,path:a,render:function(e){return r.a.createElement(n,e)}})}));return r.a.createElement(n.Fragment,null,e&&r.a.createElement("div",{className:o.a.content},r.a.createElement(s.d,null,a,r.a.createElement(s.a,{to:"/"}))))},U=a(14),V=a(17),z=function(e){return JSON.parse(JSON.stringify(e))},H=function(e,t){var a=Object(V.a)({},e);return delete a[t],a},R=function(e,t){var a=e.indexOf(t);return e.splice(a,1),e},Z={filmsList:[],init:!1,isPost:!1},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PUT_FILMS":var a=t.payload,n=a.entities,r=a.ids;return Object(V.a)({},e,{filmsList:{entities:n,ids:r}});case"ADD_FILM":var c=t.payload,i=c.id,s=c.payload,l=z(e.filmsList),o=l.entities,u=l.ids;return o[i]=s,u.push(i),Object(V.a)({},e,{filmsList:{entities:o,ids:u}});case"REMOVE_FILM":var m=z(e.filmsList),d=m.entities,f=m.ids;return Object(V.a)({},e,{filmsList:Object(V.a)({},e.filmsList,{entities:H(d,t.payload),ids:R(f,t.payload)})});case"POST_FILM_SUCCESS":return Object(V.a)({},e,{isPost:t.payload});case"SET_INIT":return Object(V.a)({},e,{init:!0});default:return e}},q=a(53),W=a(18),K=a.n(W),Y=a(50),$=a(51),X=a.n($),ee=new function e(){var t=this;Object(Y.a)(this,e),this.getFilms=function(){return t.instance.get("filmsList")},this.postCreateFilms=function(e,a){return t.instance.post("filmsList",a)},this.deleteFilm=function(e){return t.instance.delete("filmsList/".concat(e))},this.instance=X.a.create({baseURL:"http://localhost:5000/"})},te=a(10),ae=a(34),ne=K.a.mark(se),re=K.a.mark(le),ce=K.a.mark(oe),ie=K.a.mark(ue);function se(e){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(te.a)(ee.postCreateFilms,e.payload.id,e.payload.payload);case 2:return t.next=4,Object(te.b)({type:"ADD_FILM",payload:{id:e.payload.id,payload:e.payload.payload}});case 4:return t.next=6,Object(te.b)({type:"POST_FILM_SUCCESS",payload:!0});case 6:case"end":return t.stop()}}),ne)}function le(){var e,t,a,n;return K.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(te.a)(ee.getFilms);case 3:return e=r.sent,t=new ae.b.Entity("filmsList"),a=[t],n=Object(ae.a)(e.data,a),r.next=9,Object(te.b)({type:"PUT_FILMS",payload:{entities:n.entities.filmsList||{},ids:n.result}});case 9:return r.next=11,Object(te.b)({type:"SET_INIT"});case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),console.log(r.t0);case 16:case"end":return r.stop()}}),re,null,[[0,13]])}function oe(e){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(te.a)(ee.deleteFilm,e.payload);case 3:return t.next=5,Object(te.b)({type:"REMOVE_FILM",payload:e.payload});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),ce,null,[[0,7]])}function ue(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.c)("POST_FILM",se);case 2:return e.next=4,Object(te.c)("GET_FILMS",le);case 4:return e.next=6,Object(te.c)("DELETE_FILM",oe);case 6:case"end":return e.stop()}}),ie)}var me=a(52),de=Object(q.a)(),fe=Object(U.combineReducers)({films:Q}),_e=Object(U.createStore)(fe,Object(me.composeWithDevTools)(Object(U.applyMiddleware)(de)));de.run(ue);var pe=_e;i.a.render(r.a.createElement(u.a,{store:pe},r.a.createElement(D.a,null,r.a.createElement(J,null))),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.97a918d9.chunk.js.map