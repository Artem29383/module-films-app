(this["webpackJsonpmodule-list-app"]=this["webpackJsonpmodule-list-app"]||[]).push([[0],{13:function(e,t,a){e.exports={filmsContainer:"FilmsList_filmsContainer__11OxH",search:"FilmsList_search__1e7e8",content:"FilmsList_content__3tiIo",item:"FilmsList_item__3LbjF",filmsItem:"FilmsList_filmsItem__EZYd-",removeBtn:"FilmsList_removeBtn__1ydW5",active:"FilmsList_active__3BJmb",title:"FilmsList_title__24V4B",titleText:"FilmsList_titleText__3nlwD"}},22:function(e,t,a){e.exports={frameInput:"Input_frameInput__1787G",group:"Input_group__EgZ5C",label:"Input_label__15E8K",input:"Input_input__2Faqu",bar:"Input_bar__3gCN7",error:"Input_error__1s1uQ"}},45:function(e,t,a){e.exports={content:"App_content__1jzHC"}},48:function(e,t,a){e.exports={home:"HomePage_home__3TQdG"}},49:function(e,t,a){e.exports={btn:"Button_btn__xh7zG"}},56:function(e,t,a){e.exports=a(87)},6:function(e,t,a){e.exports={reactCollapse:"AddFilm_reactCollapse__Isd02",createdFilmFrame:"AddFilm_createdFilmFrame__FJNSf",show:"AddFilm_show__1cVIx",title:"AddFilm_title__2Hdq8",titleText:"AddFilm_titleText__3d4nP",close:"AddFilm_close__Qxjj7",active:"AddFilm_active__Z_2Cz",frameFields:"AddFilm_frameFields__1yfj7",field:"AddFilm_field__1dnku",error:"AddFilm_error__1iNV9",green:"AddFilm_green__VG5b5",btn:"AddFilm_btn__3WGDc"}},61:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),i=a.n(c),s=(a(61),a(19)),l=a(45),o=a.n(l),u=a(21),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.c)((function(a){return e(a,t)}))},d=a(28),f=a(47),_=a.n(f),p=function(e){return e.films.isPost},b=function(e){return e.films.filmsList.entities},v=Object(d.a)([function(e){return e.films.init}],(function(e){return e})),E=Object(d.a)([b],(function(e){return e})),O=Object(d.a)([b,function(e){return e.films.filmsList.ids}],(function(e,t){return _()((function(a){return t.filter((function(t){return e[t].name.toLowerCase().includes(a.toLowerCase())}))}))})),j=function(e){var t=Object(u.b)();return Object(n.useCallback)((function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t({type:e,payload:a})}),[t,e])},h=a(48),F=a.n(h),L=a(16),x=a(6),y=a.n(x),g=a(29),I=a.n(g),N=a(22),C=a.n(N),T=function(e){var t=e.value,a=e.handler,n=e.desc,c=e.isError;return r.a.createElement("div",{className:C.a.group},r.a.createElement("input",{value:t,onChange:a,placeholder:" ",className:C.a.frameInput,type:"text"}),r.a.createElement("span",{className:C.a.bar}),r.a.createElement("label",{className:C.a.label},n),c&&!t&&r.a.createElement("div",{className:C.a.error},"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435."))},S=a(49),w=a.n(S),k=function(e){var t=e.children,a=e.changeHandler;return r.a.createElement("button",{className:w.a.btn,onClick:a},t)},M=a(50),A=function(){var e=Object(n.useState)(!1),t=Object(L.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(""),s=Object(L.a)(i,2),l=s[0],o=s[1],u=Object(n.useState)(""),d=Object(L.a)(u,2),f=d[0],_=d[1],b=Object(n.useState)(""),v=Object(L.a)(b,2),E=v[0],O=v[1],h=Object(n.useState)(""),F=Object(L.a)(h,2),x=F[0],g=F[1],N=Object(n.useState)(!1),C=Object(L.a)(N,2),S=C[0],w=C[1],A=m(p),P=j("POST_FILM"),D=j("POST_FILM_SUCCESS"),B=Object(n.useCallback)((function(e){o(e.currentTarget.value)}),[o]),G=Object(n.useCallback)((function(e){_(e.currentTarget.value)}),[_]),H=Object(n.useCallback)((function(e){O(e.currentTarget.value)}),[O]),J=Object(n.useCallback)((function(e){g(e.currentTarget.value)}),[g]);Object(n.useEffect)((function(){S&&setTimeout((function(){return w(!1)}),2e3),A&&setTimeout((function(){return D(!1)}),2e3)}),[S,A,D]);var U={collapse:"".concat(y.a.reactCollapse),content:"".concat(I()(y.a.createdFilmFrame,a&&y.a.show))};return r.a.createElement(M.Collapse,{isOpened:a||!a,theme:U},r.a.createElement("div",{className:y.a.title},r.a.createElement("div",{className:y.a.titleText},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c")),r.a.createElement("div",{className:y.a.frameFields},r.a.createElement("div",{className:y.a.field},r.a.createElement(T,{isError:S,value:l,handler:B,desc:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"})),r.a.createElement("div",{className:y.a.field},r.a.createElement(T,{isError:S,value:f,handler:G,desc:"\u0416\u0430\u043d\u0440"})),r.a.createElement("div",{className:y.a.field},r.a.createElement(T,{isError:S,value:E,handler:H,desc:"\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430"})),r.a.createElement("div",{className:y.a.field},r.a.createElement(T,{isError:S,value:x,handler:J,desc:"\u0421\u0442\u0440\u0430\u043d\u0430 \u0432\u044b\u043f\u0443\u0441\u043a\u0430"})),A&&r.a.createElement("div",{className:I()(y.a.error,y.a.green)},"\u0424\u0438\u043b\u044c\u043c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d.")),r.a.createElement("div",{className:y.a.btn},r.a.createElement(k,{changeHandler:function(){if(l.trim()&&f.trim()&&E.trim()&&x.trim()){var e=Date.now();P({id:e,payload:{id:e,name:l,genre:f,date:E,country:x,fields:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","\u0416\u0430\u043d\u0440","\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430","\u0421\u0442\u0440\u0430\u043d\u0430"]}}),o(""),_(""),O(""),g("")}else w(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c")),r.a.createElement("div",{className:I()(y.a.close,a&&y.a.active),onClick:function(){c(!a),a&&(o(""),_(""),O(""),g(""))}}))},P=a(13),D=a.n(P),B=a(20),G=function(){var e=Object(s.g)(),t=Object(n.useState)(""),a=Object(L.a)(t,2),c=a[0],i=a[1],l=m(E),o=m(O)(c),u=/\?search=([(a-zA-Z)|(\u0430-\u044f\u0410-\u042f)|\w]+)/.test(e.location.search),d=j("DELETE_FILM"),f=Object(n.useCallback)((function(t){t.currentTarget.value.trim()?(i(t.currentTarget.value),e.push("/?search=".concat(t.currentTarget.value.toLowerCase()))):(i(""),e.push("/"))}),[i,e]);Object(n.useEffect)((function(){if(u){var t=e.location.search.match(/=(.+)$/m)[1].replace(/%20/g," ");i(t)}}),[]),Object(n.useEffect)((function(){!u&&c&&i("")}),[u,c]);var _=o.map((function(e){return r.a.createElement("li",{key:e,className:D.a.item},r.a.createElement(B.b,{to:"/films/".concat(e),activeClassName:D.a.active,className:D.a.filmsItem},r.a.createElement("div",{className:D.a.title},r.a.createElement("span",{className:D.a.titleText},l[e].name.length>15?l[e].name.slice(0,15)+"...":l[e].name))),r.a.createElement(B.b,{to:"/",className:D.a.removeBtn,onClick:function(){return function(e){d(e)}(e)}},"\u2716"))}));return r.a.createElement("div",{className:D.a.filmsContainer},r.a.createElement("div",{className:D.a.search},r.a.createElement(T,{value:c,handler:f,desc:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u043c\u0430"})),r.a.createElement("div",{className:D.a.content},r.a.createElement("ul",null,_)))},H=[{exact:!0,path:["/","/?search=?str","/films/:id"],component:function(){return r.a.createElement("div",{className:F.a.home},r.a.createElement(A,null),r.a.createElement(G,null))}}],J=function(){var e=m(v),t=j("GET_FILMS");Object(n.useEffect)((function(){t()}),[t]);var a=H.map((function(e){var t=e.exact,a=e.path,n=e.component;return r.a.createElement(s.b,{exact:t,key:a,path:a,render:function(e){return r.a.createElement(n,e)}})}));return r.a.createElement(n.Fragment,null,e&&r.a.createElement("div",{className:o.a.content},r.a.createElement(s.d,null,a,r.a.createElement(s.a,{to:"/"}))))},U=a(14),V=a(17),z=function(e){return JSON.parse(JSON.stringify(e))},R=function(e,t){var a=Object(V.a)({},e);return delete a[t],a},Z=function(e,t){var a=e.indexOf(t);return e.splice(a,1),e},Q={filmsList:[],init:!1,isPost:!1},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PUT_FILMS":var a=t.payload,n=a.entities,r=a.ids;return Object(V.a)({},e,{filmsList:{entities:n,ids:r}});case"ADD_FILM":var c=t.payload,i=c.id,s=c.payload,l=z(e.filmsList),o=l.entities,u=l.ids;return o[i]=s,u.push(i),Object(V.a)({},e,{filmsList:{entities:o,ids:u}});case"REMOVE_FILM":var m=z(e.filmsList),d=m.entities,f=m.ids;return Object(V.a)({},e,{filmsList:Object(V.a)({},e.filmsList,{entities:R(d,t.payload),ids:Z(f,t.payload)})});case"POST_FILM_SUCCESS":return Object(V.a)({},e,{isPost:t.payload});case"SET_INIT":return Object(V.a)({},e,{init:!0});default:return e}},q=a(55),K=a(18),Y=a.n(K),$=a(52),X=a(53),ee=a.n(X),te=new function e(){var t=this;Object($.a)(this,e),this.getFilms=function(){return t.instance.get("filmsList")},this.postCreateFilms=function(e,a){return t.instance.post("filmsList",a)},this.deleteFilm=function(e){return t.instance.delete("filmsList/".concat(e))},this.instance=ee.a.create({baseURL:"http://localhost:5000/"})},ae=a(11),ne=a(34),re=Y.a.mark(le),ce=Y.a.mark(oe),ie=Y.a.mark(ue),se=Y.a.mark(me);function le(e){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ae.a)(te.postCreateFilms,e.payload.id,e.payload.payload);case 2:return t.next=4,Object(ae.b)({type:"ADD_FILM",payload:{id:e.payload.id,payload:e.payload.payload}});case 4:return t.next=6,Object(ae.b)({type:"POST_FILM_SUCCESS",payload:!0});case 6:case"end":return t.stop()}}),re)}function oe(){var e,t,a,n;return Y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(ae.a)(te.getFilms);case 3:return e=r.sent,t=new ne.b.Entity("filmsList"),a=[t],n=Object(ne.a)(e.data,a),r.next=9,Object(ae.b)({type:"PUT_FILMS",payload:{entities:n.entities.filmsList||{},ids:n.result}});case 9:return r.next=11,Object(ae.b)({type:"SET_INIT"});case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),console.log(r.t0);case 16:case"end":return r.stop()}}),ce,null,[[0,13]])}function ue(e){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ae.a)(te.deleteFilm,e.payload);case 3:return t.next=5,Object(ae.b)({type:"REMOVE_FILM",payload:e.payload});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),ie,null,[[0,7]])}function me(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ae.c)("POST_FILM",le);case 2:return e.next=4,Object(ae.c)("GET_FILMS",oe);case 4:return e.next=6,Object(ae.c)("DELETE_FILM",ue);case 6:case"end":return e.stop()}}),se)}var de=a(54),fe=Object(q.a)(),_e=Object(U.combineReducers)({films:W}),pe=Object(U.createStore)(_e,Object(de.composeWithDevTools)(Object(U.applyMiddleware)(fe)));fe.run(me);var be=pe;i.a.render(r.a.createElement(u.a,{store:be},r.a.createElement(B.a,null,r.a.createElement(J,null))),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.70163455.chunk.js.map