(this["webpackJsonpmodule-list-app"]=this["webpackJsonpmodule-list-app"]||[]).push([[0],{105:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(29),i=n.n(c),l=(n(69),n(22)),o=n(50),s=n.n(o),u=n(24),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.c)((function(n){return e(n,t)}))},d=function(e){var t=Object(u.b)();return Object(a.useCallback)((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t({type:e,payload:n})}),[t,e])},f=n(27),p=n(35),b=n.n(p),v=function(e){return e.films.isPost},E=function(e){return e.films.filmsList.entities},_=function(e){return e.films.filmsList.ids},O=Object(f.a)([function(e){return e.films.init}],(function(e){return e})),j=Object(f.a)([E],(function(e){return e})),h=Object(f.a)([E,_],(function(e){return b()((function(t){return Object.keys(e[t]||[]).filter((function(e){return"id"!==e&&"fields"!==e}))}))})),F=Object(f.a)([E,_],(function(e,t){return b()((function(n){return t.filter((function(t){return e[t].name.toLowerCase().includes(n.toLowerCase())}))}))})),x=n(52),y=n.n(x),L=n(13),g=n(53),k=n(31),C=n.n(k),S=n(6),I=n.n(S),w=n(8),T=n(9);function D(){var e=Object(w.a)(["\n  position: absolute;\n  font-family: Helvetica_Medium;\n  font-size: 16px;\n  color: red;\n  bottom: -45%;\n  left: 50%;\n  transform: translateX(-50%);\n"]);return D=function(){return e},e}function N(){var e=Object(w.a)(["\n  border: none;\n  background-color: transparent;\n  width: 100%;\n  font-size: 22px;\n  padding-left: 15px;\n  padding-bottom: 7px;\n  border-bottom: 2px solid #999;\n  margin-left: 50%;\n  transform: translateX(-50%);\n  &:focus ~ ",", &:not(:placeholder-shown) ~ "," {\n  top: -5px;\n  color: #ea5a5a;\n  }\n  &:focus ~ ",", &:not(:placeholder-shown) ~ "," {\n  transform: rotateY(0deg);\n  }\n"]);return N=function(){return e},e}function M(){var e=Object(w.a)(["\n  position: relative;\n"]);return M=function(){return e},e}function A(){var e=Object(w.a)(["\n  position: absolute;\n  height: 3px;\n  content: '';\n  transform: rotateY(90deg);\n  transition: transform .2s linear;\n  background-color: #ea5a5a;\n  width: 100%;\n  bottom: 0;\n  left: 0;\n"]);return A=function(){return e},e}function P(){var e=Object(w.a)(["\n  font-size: 14px;\n  pointer-events: none;\n  color: #999;\n  position: absolute;\n  left: 30px;\n  top: 25px;\n  transition: 0.2s ease all;\n"]);return P=function(){return e},e}var U=T.a.label(P()),B=T.a.div(A()),R={Group:T.a.div(M()),Label:U,Bar:B,InputField:T.a.input(N(),U,U,B,B),Error:T.a.div(D())},H=Object(a.memo)((function(e){var t=e.value,n=e.handler,a=e.blur,c=e.keyDown,i=e.desc,l=e.isError,o=e.focus,s=void 0!==o&&o;return r.a.createElement(R.Group,null,r.a.createElement(R.InputField,{value:t,onChange:n,onBlur:a,onKeyDown:c,placeholder:" ",type:"text",autoFocus:s}),r.a.createElement(R.Bar,null),r.a.createElement(R.Label,null,i),l&&!t&&r.a.createElement(R.Error,null,"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435."))}));function z(){var e=Object(w.a)(["\n  background: #ea5a5a;\n  text-transform: uppercase;\n  max-width: 160px;\n  width: 100%;\n  font-size: 14px;\n  line-height: 2.5;\n  border: none;\n  cursor: pointer;\n  color: #fff;\n  font-family: Helvetica_Bold;\n  border-radius: 20px;\n  margin-left: 50%;\n  transform: translateX(-50%);\n"]);return z=function(){return e},e}var G=T.a.button(z()),J=Object(a.memo)((function(e){var t=e.children,n=e.clickHandler;return r.a.createElement(G,{onClick:n},t)})),X=function(){var e=Object(a.useState)(!1),t=Object(L.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(""),l=Object(L.a)(i,2),o=l[0],s=l[1],u=Object(a.useState)(""),f=Object(L.a)(u,2),p=f[0],b=f[1],E=Object(a.useState)(""),_=Object(L.a)(E,2),O=_[0],j=_[1],h=Object(a.useState)(""),F=Object(L.a)(h,2),x=F[0],y=F[1],k=Object(a.useState)(!1),S=Object(L.a)(k,2),w=S[0],T=S[1],D=m(v),N=d("POST_FILM"),M=d("POST_FILM_SUCCESS"),A=Object(a.useCallback)((function(e){s(e.currentTarget.value)}),[s]),P=Object(a.useCallback)((function(e){b(e.currentTarget.value)}),[b]),U=Object(a.useCallback)((function(e){j(e.currentTarget.value)}),[j]),B=Object(a.useCallback)((function(e){y(e.currentTarget.value)}),[y]);Object(a.useEffect)((function(){w&&setTimeout((function(){return T(!1)}),2e3),D&&setTimeout((function(){return M(!1)}),2e3)}),[w,D,M]);var R={collapse:"".concat(I.a.reactCollapse),content:"".concat(C()(I.a.createdFilmFrame,n&&I.a.show))};return r.a.createElement(g.Collapse,{isOpened:!0,theme:R},r.a.createElement("div",{className:I.a.title},r.a.createElement("div",{className:I.a.titleText},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c")),r.a.createElement("div",{className:I.a.frameFields},r.a.createElement("div",{className:I.a.field},r.a.createElement(H,{isError:w,value:o,handler:A,desc:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"})),r.a.createElement("div",{className:I.a.field},r.a.createElement(H,{isError:w,value:p,handler:P,desc:"\u0416\u0430\u043d\u0440"})),r.a.createElement("div",{className:I.a.field},r.a.createElement(H,{isError:w,value:O,handler:U,desc:"\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430"})),r.a.createElement("div",{className:I.a.field},r.a.createElement(H,{isError:w,value:x,handler:B,desc:"\u0421\u0442\u0440\u0430\u043d\u0430 \u0432\u044b\u043f\u0443\u0441\u043a\u0430"})),D&&r.a.createElement("div",{className:C()(I.a.error,I.a.green)},"\u0424\u0438\u043b\u044c\u043c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d.")),r.a.createElement("div",{className:I.a.btn},r.a.createElement(J,{clickHandler:function(){if(o.trim()&&p.trim()&&O.trim()&&x.trim()){var e=Date.now();N({payload:{id:e,name:o,genre:p,date:O,country:x,fields:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","\u0416\u0430\u043d\u0440","\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430","\u0421\u0442\u0440\u0430\u043d\u0430"]}}),s(""),b(""),j(""),y("")}else T(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c")),r.a.createElement("div",{className:C()(I.a.close,n&&I.a.active),onClick:function(){c(!n),n&&(s(""),b(""),j(""),y(""))}}))},K=n(57),V=n.n(K),W=n(32),q=n.n(W),Y=n(17),Z=n(25),Q=n.n(Z),$=Object(a.memo)((function(e){var t=e.id,n=e.films,a=e.removeFilmHandler;return r.a.createElement("li",{key:t,className:Q.a.item},r.a.createElement(Y.b,{to:"/films/".concat(t),className:Q.a.filmsItem},r.a.createElement("div",{className:Q.a.title},r.a.createElement("span",{className:Q.a.titleText},n[t].name))),r.a.createElement(Y.b,{to:"/",className:Q.a.removeBtn,onClick:function(){return a(t)}}))})),ee=function(){var e=Object(l.g)(),t=Object(a.useState)(""),n=Object(L.a)(t,2),c=n[0],i=n[1],o=m(j),s=m(F)(c),u=V.a.parse(e.location.search).search||"",f=""!==u.trim(),p=d("DELETE_FILM"),b=Object(a.useCallback)((function(t){var n=t.currentTarget.value;n.trim()?(i(n),e.push("/?search=".concat(n.toLowerCase()))):(i(""),e.push("/"))}),[i,e]),v=function(e){p(e)};Object(a.useEffect)((function(){f&&i(u)}),[]),Object(a.useEffect)((function(){!f&&c&&i("")}),[f,c]);var E=s.map((function(e){return r.a.createElement($,{key:e,id:e,films:o,removeFilmHandler:v})}));return r.a.createElement("div",{className:q.a.filmsContainer},r.a.createElement("div",{className:q.a.search},r.a.createElement(H,{value:c,handler:b,desc:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u043c\u0430"})),r.a.createElement("div",{className:q.a.content},r.a.createElement("ul",null,E)))},te=function(){return r.a.createElement("div",{className:y.a.home},r.a.createElement(X,null),r.a.createElement(ee,null))},ne=n(26),ae=n(12);function re(){var e=Object(w.a)(["\n  padding: 0 55px;\n"]);return re=function(){return e},e}function ce(){var e=Object(w.a)(["\n  font-size: 22px;\n  color: #444;\n  word-break: break-word;\n  border-bottom: 2px solid #444;\n  width: 100%;\n  padding: 30px 0 7px 15px;\n  margin-left: 50%;\n  transform: translateX(-50%);\n"]);return ce=function(){return e},e}var ie={StyledValue:T.a.div(ce()),WrapField:T.a.div(re())},le=function(e){var t=e.value,n=e.handler,a=e.handlerKeyDown,c=e.handlerBlur,i=e.name,l=e.field,o=e.fnDBClick,s=e.target,u=e.valueDefault;return r.a.createElement(R.Group,null,r.a.createElement(ie.WrapField,null,s!==i?r.a.createElement(ie.StyledValue,{onDoubleClick:o,"data-name":i},l,": ",u):r.a.createElement(H,{value:t,handler:n,type:"text",blur:c,keyDown:a,focus:!0})),r.a.createElement(R.Bar,null))},oe=function(e){var t=e.id,n=e.field,c=e.valueDefault,i=e.name,l=e.films,o=Object(a.useState)(""),s=Object(L.a)(o,2),u=s[0],m=s[1],f=Object(a.useState)(""),p=Object(L.a)(f,2),b=p[0],v=p[1],E=Object(a.useState)(""),_=Object(L.a)(E,2),O=_[0],j=_[1],h=d("UPDATE_FILM_FIELD"),F=Object(a.useCallback)((function(e){v(e.currentTarget.value)}),[v]);return r.a.createElement(le,{value:b,fnDBClick:function(e){v(c),j(c),m(e.currentTarget.getAttribute("data-name"))},handlerBlur:function(){b.trim()&&b!==O?(h({id:t,payload:Object(ae.a)({},l[t],Object(ne.a)({},u,b))}),m("")):(m(""),v(O))},handlerKeyDown:function(e){"Enter"===e.key&&(b!==O&&b.trim()?(h({id:t,payload:Object(ae.a)({},l[t],Object(ne.a)({},u,b))}),m("")):(v(O),m(""))),"Escape"===e.key&&(m(""),v(O))},handler:F,field:n,name:i,valueDefault:c,target:u})};function se(){var e=Object(w.a)(["\n  text-decoration:none;\n  display: block;\n  color: #fff;\n"]);return se=function(){return e},e}function ue(){var e=Object(w.a)(["\n  width: 500px;\n  height: auto;\n  box-shadow: 0 0 18px 0 rgba(0, 0, 0, 0.75);\n  border-radius: 20px;\n  padding-bottom: 30px;\n"]);return ue=function(){return e},e}var me={FilmContainer:T.a.div(ue()),Nav:Object(T.a)(Y.b)(se())},de=function(){var e=Object(l.h)().id,t=m(j),n=m(h)(e).map((function(n,a){return r.a.createElement(oe,{key:a,id:e,field:t[e].fields[a],name:n,valueDefault:t[e][n],films:t})}));return Object.keys(t).includes(e)?r.a.createElement(me.FilmContainer,null,n,r.a.createElement(J,null,r.a.createElement(me.Nav,{to:"/"},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043e\u043a\u043d\u043e"))):r.a.createElement(l.a,{to:"/"})},fe=function(){var e=m(O),t=d("GET_FILMS");return Object(a.useEffect)((function(){t()}),[t]),r.a.createElement(a.Fragment,null,e&&r.a.createElement("div",{className:s.a.content},r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/",exact:!0,render:function(){return r.a.createElement(te,null)}}),r.a.createElement(l.b,{path:"/films/:id",render:function(){return r.a.createElement(de,null)}}),r.a.createElement(l.a,{to:"/"}))))},pe=n(19),be=n(62),ve=n(59),Ee=function(e){return JSON.parse(JSON.stringify(e))},_e=function(e,t){var n=Object(ae.a)({},e);return delete n[t],n},Oe=function(e,t){var n=e.indexOf(t);return e.splice(n,1),e},je={filmsList:[],init:!1,isPost:!1},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PUT_FILMS":var n=t.payload,a=n.entities,r=n.ids;return Object(ae.a)({},e,{filmsList:{entities:a,ids:r}});case"ADD_FILM":var c=t.payload,i=c.id,l=c.payload,o=Ee(e.filmsList),s=o.entities,u=o.ids;return s[i]=l,u.push(i),Object(ae.a)({},e,{filmsList:{entities:s,ids:u}});case"DELETE_FILM_SUCCESS":var m=Ee(e.filmsList),d=m.entities,f=m.ids;return Object(ae.a)({},e,{filmsList:Object(ae.a)({},e.filmsList,{entities:_e(d,t.payload),ids:Oe(f,t.payload)})});case"UPDATE_FILM_FIELD_REDUCER":var p=t.payload,b=p.id,v=p.obj,E=Ee(e.filmsList),_=E.entities,O=E.ids;return _[b]=v,Object(ae.a)({},e,{filmsList:{entities:_,ids:O}});case"POST_FILM_SUCCESS":return Object(ae.a)({},e,{isPost:t.payload});case"SET_INIT":return Object(ae.a)({},e,{init:!0});default:return e}},Fe=n(16),xe=n.n(Fe),ye=n(7),Le=n(38),ge=n(60),ke=n(61),Ce=n.n(ke),Se=new function e(){var t=this;Object(ge.a)(this,e),this.getFilms=function(){return t.instance.get("filmsList")},this.postCreateFilms=function(e){return t.instance.post("filmsList",e)},this.deleteFilm=function(e){return t.instance.delete("filmsList/".concat(e))},this.updateFilm=function(e,n){return t.instance.put("filmsList/".concat(e),n)},this.instance=Ce.a.create({baseURL:"http://localhost:5000/"})},Ie=xe.a.mark(Me),we=xe.a.mark(Ae),Te=xe.a.mark(Pe),De=xe.a.mark(Ue),Ne=xe.a.mark(Be);function Me(e){return xe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ye.a)(Se.postCreateFilms,e.payload.payload);case 3:return t.next=5,Object(ye.b)({type:"ADD_FILM",payload:{id:e.payload.payload.id,payload:e.payload.payload}});case 5:return t.next=7,Object(ye.b)({type:"POST_FILM_SUCCESS",payload:!0});case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),Ie,null,[[0,9]])}function Ae(){var e,t,n,a;return xe.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(ye.a)(Se.getFilms);case 3:return e=r.sent,t=new Le.b.Entity("filmsList"),n=[t],a=Object(Le.a)(e.data,n),r.next=9,Object(ye.b)({type:"PUT_FILMS",payload:{entities:a.entities.filmsList||{},ids:a.result}});case 9:return r.next=11,Object(ye.b)({type:"SET_INIT"});case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),console.log(r.t0);case 16:case"end":return r.stop()}}),we,null,[[0,13]])}function Pe(e){return xe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ye.a)(Se.deleteFilm,e.payload);case 3:return t.next=5,Object(ye.b)({type:"DELETE_FILM_SUCCESS",payload:e.payload});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),Te,null,[[0,7]])}function Ue(e){return xe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ye.a)(Se.updateFilm,e.payload.id,e.payload.payload);case 3:return t.next=5,Object(ye.b)({type:"UPDATE_FILM_FIELD_REDUCER",payload:{id:e.payload.id,obj:e.payload.payload}});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),De,null,[[0,7]])}function Be(){return xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ye.c)("POST_FILM",Me);case 2:return e.next=4,Object(ye.c)("GET_FILMS",Ae);case 4:return e.next=6,Object(ye.c)("DELETE_FILM",Pe);case 6:return e.next=8,Object(ye.c)("UPDATE_FILM_FIELD",Ue);case 8:case"end":return e.stop()}}),Ne)}var Re=Object(be.a)(),He=Object(pe.combineReducers)({films:he}),ze=Object(pe.createStore)(He,Object(ve.composeWithDevTools)(Object(pe.applyMiddleware)(Re)));Re.run(Be);var Ge=ze;i.a.render(r.a.createElement(u.a,{store:Ge},r.a.createElement(Y.a,null,r.a.createElement(fe,null))),document.getElementById("root"))},25:function(e,t,n){e.exports={item:"FilmItem_item__3a3ry",filmsItem:"FilmItem_filmsItem__ck-yw",removeBtn:"FilmItem_removeBtn__2_2h9",title:"FilmItem_title__1q9vV",titleText:"FilmItem_titleText__165-_"}},32:function(e,t,n){e.exports={filmsContainer:"FilmsList_filmsContainer__3U2xG",search:"FilmsList_search__2UzQR",content:"FilmsList_content__2GZPC"}},50:function(e,t,n){e.exports={content:"App_content__JEbsR"}},52:function(e,t,n){e.exports={home:"HomePage_home__3qIF8"}},6:function(e,t,n){e.exports={reactCollapse:"AddFilm_reactCollapse__1UIbf",createdFilmFrame:"AddFilm_createdFilmFrame__qJHL1",show:"AddFilm_show__1FuCa",title:"AddFilm_title__1Xy8_",titleText:"AddFilm_titleText__1WRfP",close:"AddFilm_close__32gEo",active:"AddFilm_active__1IS8d",frameFields:"AddFilm_frameFields__ncxrV",field:"AddFilm_field__1Zd1P",error:"AddFilm_error__10bU3",green:"AddFilm_green__3zETa",btn:"AddFilm_btn__3Kmp9"}},64:function(e,t,n){e.exports=n(105)},69:function(e,t,n){}},[[64,1,2]]]);
//# sourceMappingURL=main.a4568f65.chunk.js.map