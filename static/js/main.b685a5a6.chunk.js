(this["webpackJsonpmodule-list-app"]=this["webpackJsonpmodule-list-app"]||[]).push([[0],{13:function(e,t,a){e.exports={filmsContainer:"FilmsList_filmsContainer__TscPX",search:"FilmsList_search__2HZuf",content:"FilmsList_content__2TEyD",item:"FilmsList_item__fCSsM",filmsItem:"FilmsList_filmsItem__2VD4e",removeBtn:"FilmsList_removeBtn__mJcLE",active:"FilmsList_active__1SeC6",title:"FilmsList_title__2ipUP",titleText:"FilmsList_titleText__l8OPo"}},22:function(e,t,a){e.exports={frameInput:"Input_frameInput__1787G",group:"Input_group__EgZ5C",label:"Input_label__15E8K",input:"Input_input__2Faqu",bar:"Input_bar__3gCN7",error:"Input_error__1s1uQ"}},45:function(e,t,a){e.exports={content:"App_content__1jzHC"}},48:function(e,t,a){e.exports={home:"HomePage_home__3TQdG"}},50:function(e,t,a){e.exports={btn:"Button_btn__xh7zG"}},56:function(e,t,a){e.exports=a(87)},6:function(e,t,a){e.exports={reactCollapse:"AddFilm_reactCollapse__2YVNJ",createdFilmFrame:"AddFilm_createdFilmFrame__MNSLS",show:"AddFilm_show__3nZQk",title:"AddFilm_title__oSZ5D",titleText:"AddFilm_titleText__DH0Dg",close:"AddFilm_close__pKeQH",active:"AddFilm_active__pq_Yv",frameFields:"AddFilm_frameFields__cUC1S",field:"AddFilm_field__1FkIp",error:"AddFilm_error__3o6T8",green:"AddFilm_green__2zL7P",btn:"AddFilm_btn__3n1sY"}},61:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),i=a.n(c),s=(a(61),a(19)),l=a(45),o=a.n(l),u=a(21),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.c)((function(a){return e(a,t)}))},d=a(28),f=a(47),p=a.n(f),_=function(e){return e.films.isPost},b=function(e){return e.films.filmsList.entities},v=Object(d.a)([function(e){return e.films.init}],(function(e){return e})),E=Object(d.a)([b],(function(e){return e})),O=Object(d.a)([b,function(e){return e.films.filmsList.ids}],(function(e,t){return p()((function(a){return t.filter((function(t){return e[t].name.toLowerCase().includes(a.toLowerCase())}))}))})),h=function(e){var t=Object(u.b)();return Object(n.useCallback)((function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t({type:e,payload:a})}),[t,e])},j=a(48),F=a.n(j),L=a(16),x=a(49),y=a(29),S=a.n(y),C=a(6),T=a.n(C),g=a(22),N=a.n(g),I=function(e){var t=e.value,a=e.handler,n=e.desc,c=e.isError;return r.a.createElement("div",{className:N.a.group},r.a.createElement("input",{value:t,onChange:a,placeholder:" ",className:N.a.frameInput,type:"text"}),r.a.createElement("div",{className:N.a.bar}),r.a.createElement("label",{className:N.a.label},n),c&&!t&&r.a.createElement("div",{className:N.a.error},"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435."))},k=a(50),w=a.n(k),M=function(e){var t=e.children,a=e.clickHandler;return r.a.createElement("button",{className:w.a.btn,onClick:a},t)},A=function(){var e=Object(n.useState)(!1),t=Object(L.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(""),s=Object(L.a)(i,2),l=s[0],o=s[1],u=Object(n.useState)(""),d=Object(L.a)(u,2),f=d[0],p=d[1],b=Object(n.useState)(""),v=Object(L.a)(b,2),E=v[0],O=v[1],j=Object(n.useState)(""),F=Object(L.a)(j,2),y=F[0],C=F[1],g=Object(n.useState)(!1),N=Object(L.a)(g,2),k=N[0],w=N[1],A=m(_),P=h("POST_FILM"),D=h("POST_FILM_SUCCESS"),U=Object(n.useCallback)((function(e){o(e.currentTarget.value)}),[o]),H=Object(n.useCallback)((function(e){p(e.currentTarget.value)}),[p]),J=Object(n.useCallback)((function(e){O(e.currentTarget.value)}),[O]),B=Object(n.useCallback)((function(e){C(e.currentTarget.value)}),[C]);Object(n.useEffect)((function(){k&&setTimeout((function(){return w(!1)}),2e3),A&&setTimeout((function(){return D(!1)}),2e3)}),[k,A,D]);var G={collapse:"".concat(T.a.reactCollapse),content:"".concat(S()(T.a.createdFilmFrame,a&&T.a.show))};return r.a.createElement(x.Collapse,{isOpened:a||!a,theme:G},r.a.createElement("div",{className:T.a.title},r.a.createElement("div",{className:T.a.titleText},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c")),r.a.createElement("div",{className:T.a.frameFields},r.a.createElement("div",{className:T.a.field},r.a.createElement(I,{isError:k,value:l,handler:U,desc:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"})),r.a.createElement("div",{className:T.a.field},r.a.createElement(I,{isError:k,value:f,handler:H,desc:"\u0416\u0430\u043d\u0440"})),r.a.createElement("div",{className:T.a.field},r.a.createElement(I,{isError:k,value:E,handler:J,desc:"\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430"})),r.a.createElement("div",{className:T.a.field},r.a.createElement(I,{isError:k,value:y,handler:B,desc:"\u0421\u0442\u0440\u0430\u043d\u0430 \u0432\u044b\u043f\u0443\u0441\u043a\u0430"})),A&&r.a.createElement("div",{className:S()(T.a.error,T.a.green)},"\u0424\u0438\u043b\u044c\u043c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d.")),r.a.createElement("div",{className:T.a.btn},r.a.createElement(M,{clickHandler:function(){if(l.trim()&&f.trim()&&E.trim()&&y.trim()){var e=Date.now();P({payload:{id:e,name:l,genre:f,date:E,country:y,fields:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","\u0416\u0430\u043d\u0440","\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430","\u0421\u0442\u0440\u0430\u043d\u0430"]}}),o(""),p(""),O(""),C("")}else w(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c")),r.a.createElement("div",{className:S()(T.a.close,a&&T.a.active),onClick:function(){c(!a),a&&(o(""),p(""),O(""),C(""))}}))},P=a(20),D=a(13),U=a.n(D),H=function(){var e=Object(s.g)(),t=Object(n.useState)(""),a=Object(L.a)(t,2),c=a[0],i=a[1],l=m(E),o=m(O)(c),u=/\?search=([(a-zA-Z)|(\u0430-\u044f\u0410-\u042f)|\w]+)/.test(e.location.search),d=h("DELETE_FILM"),f=Object(n.useCallback)((function(t){t.currentTarget.value.trim()?(i(t.currentTarget.value),e.push("/?search=".concat(t.currentTarget.value.toLowerCase()))):(i(""),e.push("/"))}),[i,e]);Object(n.useEffect)((function(){if(u){var t=e.location.search.match(/=(.+)$/m)[1].replace(/%20/g," ");i(t)}}),[]),Object(n.useEffect)((function(){!u&&c&&i("")}),[u,c]);var p=o.map((function(e){return r.a.createElement("li",{key:e,className:U.a.item},r.a.createElement(P.b,{to:"/films/".concat(e),activeClassName:U.a.active,className:U.a.filmsItem},r.a.createElement("div",{className:U.a.title},r.a.createElement("span",{className:U.a.titleText},l[e].name))),r.a.createElement(P.b,{to:"/",className:U.a.removeBtn,onClick:function(){return function(e){d(e)}(e)}},"\u2716"))}));return r.a.createElement("div",{className:U.a.filmsContainer},r.a.createElement("div",{className:U.a.search},r.a.createElement(I,{value:c,handler:f,desc:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u043c\u0430"})),r.a.createElement("div",{className:U.a.content},r.a.createElement("ul",null,p)))},J=[{exact:!0,path:["/","/?search=?str","/films/:id"],component:function(){return r.a.createElement("div",{className:F.a.home},r.a.createElement(A,null),r.a.createElement(H,null))}}],B=function(){var e=m(v),t=h("GET_FILMS");Object(n.useEffect)((function(){t()}),[t]);var a=J.map((function(e){var t=e.exact,a=e.path,n=e.component;return r.a.createElement(s.b,{exact:t,key:a,path:a,render:function(e){return r.a.createElement(n,e)}})}));return r.a.createElement(n.Fragment,null,e&&r.a.createElement("div",{className:o.a.content},r.a.createElement(s.d,null,a,r.a.createElement(s.a,{to:"/"}))))},G=a(14),Z=a(55),z=a(52),Q=a(17),R=function(e){return JSON.parse(JSON.stringify(e))},V=function(e,t){var a=Object(Q.a)({},e);return delete a[t],a},Y=function(e,t){var a=e.indexOf(t);return e.splice(a,1),e},q={filmsList:[],init:!1,isPost:!1},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PUT_FILMS":var a=t.payload,n=a.entities,r=a.ids;return Object(Q.a)({},e,{filmsList:{entities:n,ids:r}});case"ADD_FILM":var c=t.payload,i=c.id,s=c.payload,l=R(e.filmsList),o=l.entities,u=l.ids;return o[i]=s,u.push(i),Object(Q.a)({},e,{filmsList:{entities:o,ids:u}});case"REMOVE_FILM":var m=R(e.filmsList),d=m.entities,f=m.ids;return Object(Q.a)({},e,{filmsList:Object(Q.a)({},e.filmsList,{entities:V(d,t.payload),ids:Y(f,t.payload)})});case"POST_FILM_SUCCESS":return Object(Q.a)({},e,{isPost:t.payload});case"SET_INIT":return Object(Q.a)({},e,{init:!0});default:return e}},W=a(18),X=a.n(W),$=a(11),ee=a(34),te=a(53),ae=a(54),ne=a.n(ae),re=new function e(){var t=this;Object(te.a)(this,e),this.getFilms=function(){return t.instance.get("filmsList")},this.postCreateFilms=function(e){return t.instance.post("filmsList",e)},this.deleteFilm=function(e){return t.instance.delete("filmsList/".concat(e))},this.instance=ne.a.create({baseURL:"http://localhost:5000/"})},ce=X.a.mark(oe),ie=X.a.mark(ue),se=X.a.mark(me),le=X.a.mark(de);function oe(e){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object($.a)(re.postCreateFilms,e.payload.payload);case 3:return t.next=5,Object($.b)({type:"ADD_FILM",payload:{id:e.payload.payload.id,payload:e.payload.payload}});case 5:return t.next=7,Object($.b)({type:"POST_FILM_SUCCESS",payload:!0});case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),ce,null,[[0,9]])}function ue(){var e,t,a,n;return X.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object($.a)(re.getFilms);case 3:return e=r.sent,t=new ee.b.Entity("filmsList"),a=[t],n=Object(ee.a)(e.data,a),r.next=9,Object($.b)({type:"PUT_FILMS",payload:{entities:n.entities.filmsList||{},ids:n.result}});case 9:return r.next=11,Object($.b)({type:"SET_INIT"});case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),console.log(r.t0);case 16:case"end":return r.stop()}}),ie,null,[[0,13]])}function me(e){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object($.a)(re.deleteFilm,e.payload);case 3:return t.next=5,Object($.b)({type:"REMOVE_FILM",payload:e.payload});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),se,null,[[0,7]])}function de(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($.c)("POST_FILM",oe);case 2:return e.next=4,Object($.c)("GET_FILMS",ue);case 4:return e.next=6,Object($.c)("DELETE_FILM",me);case 6:case"end":return e.stop()}}),le)}var fe=Object(Z.a)(),pe=Object(G.combineReducers)({films:K}),_e=Object(G.createStore)(pe,Object(z.composeWithDevTools)(Object(G.applyMiddleware)(fe)));fe.run(de);var be=_e;i.a.render(r.a.createElement(u.a,{store:be},r.a.createElement(P.a,null,r.a.createElement(B,null))),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.b685a5a6.chunk.js.map